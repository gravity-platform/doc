---
title: File
layout: default
top_nav: api
---

## File service

The file service in graviton is reachable at the ``/file`` endpoint. It was developed as a catch-all solution to clients file storage needs.

Graviton file services are backed by either machine local storage or an S3 bucket depending on your deploy.

Clients may use the service to store assets like images or also to store content generated by customers.

Since the file service operates on files of all kinds of MIME-Types and also stores metadata on one single endpoint it has a larger than usual surface.

### Usage

#### Upload a file

Create and upload a simple text file as follows.

````bash
echo "Hallo Graviton" > test.txt
curl -v -H "Content-Type: text/plain" -X POST -T'{test.txt}' https://graviton.nova.scapp.io/file
````

Observe the ``Location`` header in the output from the ``POST`` request. It tells you where the file was stored.

#### Retrieve file and metadata

Get the files contents by issuing a GET request with the corresponding MIME type.

````bash
curl -H "Accept: text/plain" https://graviton.nova.scapp.io/file/55bb584a08420b5f288b457c
````

Or get the accompanying metadata by requesting JSON data.

````bash
curl -H "Accept: application/json" https://graviton.nova.scapp.io/file/55bb584a08420b5f288b457c
````

#### Update a file and/or metadata

To update a file you will need to send the corresponding MIME headers.

````bash
curl -v -H "Content-Type: text/plain" -X PUT -T'{test.txt}' https://graviton.nova.scapp.io/file/55bb584a08420b5f288b457c
````

Similarly you need to specify a JSON MIME type to update the files metadata.

````bash
curl -v -H "Accept: application/json" https://graviton.nova.scapp.io/file/55bb584a08420b5f288b457c > test.json
curl -v -H "Content-Type: application/json" -X PUT -T'{test.json}' https://graviton.nova.scapp.io/file/55bb584a08420b5f288b457c
````

### Functionality

The file service has some bits and pieces that need a more through explanantion.

#### Metadata

Some of the metadata in ``metadata`` may be updated while other parts of the metadata are readonly.

#### Links

The links field may be used to link documents with various resources. Unsless otherweise possible relationships with files should be created exclusivly using this field.

